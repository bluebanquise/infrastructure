

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>7. Roles &mdash; BlueBanquise Documentation 1.0.1 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript">
          var DOCUMENTATION_OPTIONS = {
              URL_ROOT:'./',
              VERSION:'1.0.1',
              LANGUAGE:'None',
              COLLAPSE_INDEX:false,
              FILE_SUFFIX:'.html',
              HAS_SOURCE:  true,
              SOURCELINK_SUFFIX: '.txt'
          };
      </script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="8. References" href="references.html" />
    <link rel="prev" title="6. Deploy BlueBanquise" href="deploy_bluebanquise.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> BlueBanquise Documentation
          

          
            
            <img src="_static/logo.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">1. Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="vocabulary.html">2. Vocabulary</a></li>
<li class="toctree-l1"><a class="reference internal" href="install_first_management.html">3. Install first management</a></li>
<li class="toctree-l1"><a class="reference internal" href="learn_ansible.html">4. Learn Ansible</a></li>
<li class="toctree-l1"><a class="reference internal" href="configure_bluebanquise.html">5. Configure BlueBanquise</a></li>
<li class="toctree-l1"><a class="reference internal" href="deploy_bluebanquise.html">6. Deploy BlueBanquise</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">7. Roles</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#core">7.1. CORE</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#conman">7.1.1. Conman</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#description">7.1.1.1. Description</a></li>
<li class="toctree-l4"><a class="reference internal" href="#instructions">7.1.1.2. Instructions</a></li>
<li class="toctree-l4"><a class="reference internal" href="#changelog">7.1.1.3. Changelog</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#display-tuning">7.1.2. Display_tuning</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id1">7.1.2.1. Description</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id2">7.1.2.2. Changelog</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#dhcp-server">7.1.3. DHCP server</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id3">7.1.3.1. Description</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id4">7.1.3.2. Instructions</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id5">7.1.3.3. Changelog</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#dns-server">7.1.4. DNS server</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id6">7.1.4.1. Description</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id7">7.1.4.2. Instructions</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id8">7.1.4.3. Changelog</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#dns-client">7.1.5. DNS client</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id9">7.1.5.1. Description</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id10">7.1.5.2. Instructions</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id11">7.1.5.3. Changelog</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#hosts-file">7.1.6. Hosts file</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id12">7.1.6.1. Description</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id13">7.1.6.2. Instructions</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id14">7.1.6.3. Changelog</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#log-server">7.1.7. Log server</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id15">7.1.7.1. Description</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id16">7.1.7.2. Instructions</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id17">7.1.7.3. Changelog</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#log-client">7.1.8. Log client</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id18">7.1.8.1. Description</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id19">7.1.8.2. Instructions</a></li>
<li class="toctree-l4"><a class="reference internal" href="#to-be-done">7.1.8.3. To be done</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id20">7.1.8.4. Changelog</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#nfs-server">7.1.9. NFS server</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id21">7.1.9.1. Description</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id22">7.1.9.2. Instructions</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id23">7.1.9.3. Changelog</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#nfs-client">7.1.10. NFS client</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id24">7.1.10.1. Description</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id25">7.1.10.2. Instructions</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id26">7.1.10.3. Changelog</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#nic">7.1.11. NIC</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id27">7.1.11.1. Description</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id28">7.1.11.2. Instructions</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id29">7.1.11.3. To be done</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id30">7.1.11.4. Changelog</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#pxe-stack">7.1.12. PXE Stack</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id31">7.1.12.1. Description</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id32">7.1.12.2. Instructions</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id33">7.1.12.3. To be done</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id34">7.1.12.4. Changelog</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#repositories-server">7.1.13. Repositories server</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id35">7.1.13.1. Description</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id36">7.1.13.2. Instructions</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id37">7.1.13.3. Changelog</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#repositories-client">7.1.14. Repositories client</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id38">7.1.14.1. Description</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id39">7.1.14.2. Instructions</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id40">7.1.14.3. To be done</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id41">7.1.14.4. Changelog</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#set-hostname">7.1.15. Set Hostname</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id42">7.1.15.1. Description</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id43">7.1.15.2. Instructions</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id44">7.1.15.3. Changelog</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#ssh-master">7.1.16. SSH master</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id45">7.1.16.1. Description</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id46">7.1.16.2. Instructions</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id47">7.1.16.3. To be done</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id48">7.1.16.4. Changelog</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#ssh-slave">7.1.17. SSH slave</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id49">7.1.17.1. Description</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id50">7.1.17.2. Instructions</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id51">7.1.17.3. Changelog</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#time-server">7.1.18. Time server</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id52">7.1.18.1. Description</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id53">7.1.18.2. Instructions</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id54">7.1.18.3. To be done</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id55">7.1.18.4. Changelog</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#advanced-core">7.2. ADVANCED CORE</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#advanced-dhcp-server">7.2.1. Advanced DHCP server</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id56">7.2.1.1. Description</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id57">7.2.1.2. Instructions</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id58">7.2.1.3. Changelog</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#addons">7.3. ADDONS</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#cloning">7.3.1. Cloning</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id59">7.3.1.1. Description</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id60">7.3.1.2. Instructions</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id61">7.3.1.3. Changelog</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#clustershell">7.3.2. ClusterShell</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id62">7.3.2.1. Description</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id63">7.3.2.2. Instructions</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id64">7.3.2.3. To be done</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id65">7.3.2.4. Changelog</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#diskless">7.3.3. Diskless</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id66">7.3.3.1. Description</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id67">7.3.3.2. Instructions</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id68">7.3.3.3. To be done</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id69">7.3.3.4. Changelog</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#ofed">7.3.4. OFED</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id70">7.3.4.1. Description</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id71">7.3.4.2. Instructions</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id72">7.3.4.3. To be done</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id73">7.3.4.4. Changelog</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#ofed-sm">7.3.5. OFED_SM</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id74">7.3.5.1. Description</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id75">7.3.5.2. Instructions</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id76">7.3.5.3. To be done</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id77">7.3.5.4. Changelog</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#openldap-client">7.3.6. OpenLDAP client</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id78">7.3.6.1. Description</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id79">7.3.6.2. Instructions</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id80">7.3.6.3. To be done</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id81">7.3.6.4. Changelog</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#openldap-server">7.3.7. OpenLDAP server</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id82">7.3.7.1. Description</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id83">7.3.7.2. Instructions</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id84">7.3.7.3. To be done</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id85">7.3.7.4. Changelog</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#nic-with-nmcli">7.3.8. NIC with nmcli</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id86">7.3.8.1. Description</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id87">7.3.8.2. Instructions</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id88">7.3.8.3. To be done</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id89">7.3.8.4. Changelog</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#prometheus-server">7.3.9. Prometheus server</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id90">7.3.9.1. Description</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id91">7.3.9.2. Instructions</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id92">7.3.9.3. To be done</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id93">7.3.9.4. Changelog</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#prometheus-client">7.3.10. Prometheus client</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id94">7.3.10.1. Description</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id95">7.3.10.2. Instructions</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id96">7.3.10.3. To be done</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id97">7.3.10.4. Changelog</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#report">7.3.11. Report</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id98">7.3.11.1. Description</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id99">7.3.11.2. Instructions</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id100">7.3.11.3. To be done</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id101">7.3.11.4. Changelog</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#slurm">7.3.12. Slurm</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id102">7.3.12.1. Description</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id103">7.3.12.2. Instructions</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id104">7.3.12.3. To be done</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id105">7.3.12.4. Changelog</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#users-basic">7.3.13. Users basic</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id106">7.3.13.1. Description</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id107">7.3.13.2. Instructions</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id108">7.3.13.3. Changelog</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="references.html">8. References</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">BlueBanquise Documentation</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>7. Roles</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/roles.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="roles">
<h1>7. Roles<a class="headerlink" href="#roles" title="Permalink to this headline">¶</a></h1>
<p>This part is an agregations of all the <strong>BlueBanquise</strong> roles readme.</p>
<div class="section" id="core">
<h2>7.1. CORE<a class="headerlink" href="#core" title="Permalink to this headline">¶</a></h2>
<div class="section" id="conman">
<h3>7.1.1. Conman<a class="headerlink" href="#conman" title="Permalink to this headline">¶</a></h3>
<div class="section" id="description">
<h4>7.1.1.1. Description<a class="headerlink" href="#description" title="Permalink to this headline">¶</a></h4>
<p>This role provides a conman daemon that logs ipmi serial consols.</p>
<p>Validated on:</p>
<ul class="simple">
<li>Centos 7.6</li>
<li>Ubuntu 18.04</li>
</ul>
</div>
<div class="section" id="instructions">
<h4>7.1.1.2. Instructions<a class="headerlink" href="#instructions" title="Permalink to this headline">¶</a></h4>
<p>To login into a console, use:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>conman mynode
</pre></div>
</div>
<p>To exit, simply press <strong>&amp;</strong> then <strong>.</strong> .</p>
</div>
<div class="section" id="changelog">
<h4>7.1.1.3. Changelog<a class="headerlink" href="#changelog" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>1.0.2: Tested on ubuntu 18.04 and validated. johnnykeats &lt;<a class="reference external" href="mailto:johnny&#46;keats&#37;&#52;&#48;outlook&#46;com">johnny<span>&#46;</span>keats<span>&#64;</span>outlook<span>&#46;</span>com</a>&gt;</li>
<li>1.0.1: Documentation. johnnykeats &lt;<a class="reference external" href="mailto:johnny&#46;keats&#37;&#52;&#48;outlook&#46;com">johnny<span>&#46;</span>keats<span>&#64;</span>outlook<span>&#46;</span>com</a>&gt;</li>
<li>1.0.0: Role creation. Benoit Leveugle &lt;<a class="reference external" href="mailto:benoit&#46;leveugle&#37;&#52;&#48;gmail&#46;com">benoit<span>&#46;</span>leveugle<span>&#64;</span>gmail<span>&#46;</span>com</a>&gt;</li>
</ul>
</div>
</div>
<div class="section" id="display-tuning">
<h3>7.1.2. Display_tuning<a class="headerlink" href="#display-tuning" title="Permalink to this headline">¶</a></h3>
<div class="section" id="id1">
<h4>7.1.2.1. Description<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h4>
<p>This role provides some nice colors and screenrc.</p>
<p>Validated on:</p>
<ul class="simple">
<li>Centos 8.0</li>
</ul>
</div>
<div class="section" id="id2">
<h4>7.1.2.2. Changelog<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>1.0.0: Role creation. Benoit Leveugle &lt;<a class="reference external" href="mailto:benoit&#46;leveugle&#37;&#52;&#48;gmail&#46;com">benoit<span>&#46;</span>leveugle<span>&#64;</span>gmail<span>&#46;</span>com</a>&gt;</li>
</ul>
</div>
</div>
<div class="section" id="dhcp-server">
<h3>7.1.3. DHCP server<a class="headerlink" href="#dhcp-server" title="Permalink to this headline">¶</a></h3>
<div class="section" id="id3">
<h4>7.1.3.1. Description<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h4>
<p>This role provides a standard and simple dhcp server combined with the iPXE roms of BlueBanquise. It should be enough for most networks.</p>
<p>Please use advanced version if you need advanced features like shared-networks, opt61/82 match, or need to force iPXE roms to be used or use advanced iPXE driver.</p>
</div>
<div class="section" id="id4">
<h4>7.1.3.2. Instructions<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h4>
<p>This role provides basic features for network relying on MAC only (or range of unknown hosts).</p>
<p>The role will only take into account networks from the current iceberg, and with naming related to administration network (by default iceX-Y). In single iceberg configuration, i.e. default, it will consider ice1-X networks.</p>
<p>For a network to be integrated in the dhcp, the variable <strong>is_in_dhcp</strong> must be set to true in network related.</p>
<p>Note also that dhcp role will use the following optional parameters if they exist in network:</p>
<ul class="simple">
<li>dhcp_unknown_range: define the range of the subnet, for unregistered hosts. Can be useful for temporary connections (laptops, etc) or to detect if an hardware is missing in the inventory.</li>
<li>gateway: define router in the subnet, and so gateway provided by the dhcp server.</li>
</ul>
<p>Resulting example network could be:</p>
<div class="highlight-yaml"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">networks</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">ice1-1</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">subnet</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">10.11.0.0</span>
    <span class="l l-Scalar l-Scalar-Plain">prefix</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">16</span>
    <span class="l l-Scalar l-Scalar-Plain">netmask</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">255.255.0.0</span>
    <span class="l l-Scalar l-Scalar-Plain">broadcast</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">10.11.255.255</span>
    <span class="l l-Scalar l-Scalar-Plain">dhcp_unknown_range</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">10.11.254.1 10.11.254.254</span>  <span class="c1"># Is optional</span>
    <span class="l l-Scalar l-Scalar-Plain">gateway</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">10.11.2.1</span>  <span class="c1"># Is optional</span>
    <span class="l l-Scalar l-Scalar-Plain">is_in_dhcp</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>  <span class="c1"># Must be set to true for dhcp role to integrate this network</span>
    <span class="l l-Scalar l-Scalar-Plain">is_in_dns</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
    <span class="l l-Scalar l-Scalar-Plain">services_ip</span><span class="p p-Indicator">:</span>
      <span class="l l-Scalar l-Scalar-Plain">pxe_ip</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">10.11.0.1</span>  <span class="c1"># Will be used by dhcp for next server</span>
      <span class="l l-Scalar l-Scalar-Plain">dns_ip</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">10.11.0.1</span>  <span class="c1"># Will be used by dhcp for dns server</span>
      <span class="l l-Scalar l-Scalar-Plain">repository_ip</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">10.11.0.1</span>
      <span class="l l-Scalar l-Scalar-Plain">authentication_ip</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">10.11.0.1</span>
      <span class="l l-Scalar l-Scalar-Plain">time_ip</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">10.11.0.1</span>  <span class="c1"># Will be used by dhcp for time server</span>
      <span class="l l-Scalar l-Scalar-Plain">log_ip</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">10.11.0.1</span>
</pre></div>
</div>
<p>Finaly, note that the following parameters can be set in the inventory (group_vars/all/general_settings/network.yml):</p>
<ul class="simple">
<li>default_lease_time</li>
<li>max_lease_time</li>
</ul>
<p>Consider increasing the default values once your network is production ready.</p>
</div>
<div class="section" id="id5">
<h4>7.1.3.3. Changelog<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>1.0.3: Simplify standard dhcp, create advanced dhcp for complex configurations. Benoit Leveugle &lt;<a class="reference external" href="mailto:benoit&#46;leveugle&#37;&#52;&#48;gmail&#46;com">benoit<span>&#46;</span>leveugle<span>&#64;</span>gmail<span>&#46;</span>com</a>&gt;</li>
<li>1.0.2: Added Ubuntu 18.04 compatibility. johnnykeats &lt;<a class="reference external" href="mailto:johnny&#46;keats&#37;&#52;&#48;outlook&#46;com">johnny<span>&#46;</span>keats<span>&#64;</span>outlook<span>&#46;</span>com</a>&gt;</li>
<li>1.0.1: Documentation. johnnykeats &lt;<a class="reference external" href="mailto:johnny&#46;keats&#37;&#52;&#48;outlook&#46;com">johnny<span>&#46;</span>keats<span>&#64;</span>outlook<span>&#46;</span>com</a>&gt;</li>
<li>1.0.0: Role creation. Benoit Leveugle &lt;<a class="reference external" href="mailto:benoit&#46;leveugle&#37;&#52;&#48;gmail&#46;com">benoit<span>&#46;</span>leveugle<span>&#64;</span>gmail<span>&#46;</span>com</a>&gt;</li>
</ul>
</div>
</div>
<div class="section" id="dns-server">
<h3>7.1.4. DNS server<a class="headerlink" href="#dns-server" title="Permalink to this headline">¶</a></h3>
<div class="section" id="id6">
<h4>7.1.4.1. Description<a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h4>
<p>This role provides a basic dns server based on bind.</p>
</div>
<div class="section" id="id7">
<h4>7.1.4.2. Instructions<a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h4>
<p>This DNS role will automatically add all networks of the cluster, assuming their variable <strong>is_in_dns</strong> is set to true:</p>
<div class="highlight-yaml"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">networks</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">ice1-1</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">subnet</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">10.11.0.0</span>
    <span class="l l-Scalar l-Scalar-Plain">prefix</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">16</span>
    <span class="l l-Scalar l-Scalar-Plain">netmask</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">255.255.0.0</span>
    <span class="l l-Scalar l-Scalar-Plain">broadcast</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">10.11.255.255</span>
    <span class="l l-Scalar l-Scalar-Plain">is_in_dhcp</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
    <span class="l l-Scalar l-Scalar-Plain">is_in_dns</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">true  &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;</span>
    <span class="l l-Scalar l-Scalar-Plain">services_ip</span><span class="p p-Indicator">:</span>
      <span class="l l-Scalar l-Scalar-Plain">dns_ip</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">10.11.0.1</span>
</pre></div>
</div>
<p>It will generate 3 files:</p>
<ul class="simple">
<li>/etc/named.conf that contains main configuration, and that will try to bind to all networks defined on the host it is deployed on, using <strong>services_ip.dns_ip</strong> variable ip of the network.</li>
<li>/var/named/forward that contains forward resolution of hosts</li>
<li>/var/named/reverse that contains reverse resolution of hosts</li>
</ul>
<p>External hosts defined in <em>group_vars/all/general_settings/external.yml</em> at variable <strong>external_hosts</strong> will be automatically added in the dns configuration.</p>
<p>To configure forwarding and intergrate this dns server into an existing IT configuration, use file <em>group_vars/all/general_settings/external.yml</em>.
It is possible to add here an external dns to bind to for this internal dns, as a relay.</p>
<div class="highlight-yaml"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">external_dns</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">dns_server</span><span class="p p-Indicator">:</span>  <span class="l l-Scalar l-Scalar-Plain">&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;</span>
    <span class="l l-Scalar l-Scalar-Plain">- 208.67.222.222</span>
</pre></div>
</div>
</div>
<div class="section" id="id8">
<h4>7.1.4.3. Changelog<a class="headerlink" href="#id8" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>1.0.2: Added Ubuntu 18.04 compatibility. johnnykeats &lt;<a class="reference external" href="mailto:johnny&#46;keats&#37;&#52;&#48;outlook&#46;com">johnny<span>&#46;</span>keats<span>&#64;</span>outlook<span>&#46;</span>com</a>&gt;</li>
<li>1.0.1: Documentation. johnnykeats &lt;<a class="reference external" href="mailto:johnny&#46;keats&#37;&#52;&#48;outlook&#46;com">johnny<span>&#46;</span>keats<span>&#64;</span>outlook<span>&#46;</span>com</a>&gt;</li>
<li>1.0.0: Role creation. Benoit Leveugle &lt;<a class="reference external" href="mailto:benoit&#46;leveugle&#37;&#52;&#48;gmail&#46;com">benoit<span>&#46;</span>leveugle<span>&#64;</span>gmail<span>&#46;</span>com</a>&gt;</li>
</ul>
</div>
</div>
<div class="section" id="dns-client">
<h3>7.1.5. DNS client<a class="headerlink" href="#dns-client" title="Permalink to this headline">¶</a></h3>
<div class="section" id="id9">
<h4>7.1.5.1. Description<a class="headerlink" href="#id9" title="Permalink to this headline">¶</a></h4>
<p>This role provides a basic /etc/resolv.conf file.</p>
</div>
<div class="section" id="id10">
<h4>7.1.5.2. Instructions<a class="headerlink" href="#id10" title="Permalink to this headline">¶</a></h4>
<p>Configuration is made in <em>group_vars/all/general_settings/external.yml</em>.</p>
<p>It is possible to add here external DNS servers for clients:</p>
<div class="highlight-yaml"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">external_dns</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">dns_client</span><span class="p p-Indicator">:</span>  <span class="l l-Scalar l-Scalar-Plain">&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;</span>
    <span class="l l-Scalar l-Scalar-Plain">- 208.67.220.220</span>
</pre></div>
</div>
<p>Note that this/these external(s) dns will be placed after the cluster internal dns in resolution order.</p>
</div>
<div class="section" id="id11">
<h4>7.1.5.3. Changelog<a class="headerlink" href="#id11" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>1.0.2: Added variable for role version. johnnykeats &lt;<a class="reference external" href="mailto:johnny&#46;keats&#37;&#52;&#48;outlook&#46;com">johnny<span>&#46;</span>keats<span>&#64;</span>outlook<span>&#46;</span>com</a>&gt;</li>
<li>1.0.1: Documentation. johnnykeats &lt;<a class="reference external" href="mailto:johnny&#46;keats&#37;&#52;&#48;outlook&#46;com">johnny<span>&#46;</span>keats<span>&#64;</span>outlook<span>&#46;</span>com</a>&gt;</li>
<li>1.0.0: Role creation. Benoit Leveugle &lt;<a class="reference external" href="mailto:benoit&#46;leveugle&#37;&#52;&#48;gmail&#46;com">benoit<span>&#46;</span>leveugle<span>&#64;</span>gmail<span>&#46;</span>com</a>&gt;</li>
</ul>
</div>
</div>
<div class="section" id="hosts-file">
<h3>7.1.6. Hosts file<a class="headerlink" href="#hosts-file" title="Permalink to this headline">¶</a></h3>
<div class="section" id="id12">
<h4>7.1.6.1. Description<a class="headerlink" href="#id12" title="Permalink to this headline">¶</a></h4>
<p>This role provides a basic /etc/hosts files.</p>
</div>
<div class="section" id="id13">
<h4>7.1.6.2. Instructions<a class="headerlink" href="#id13" title="Permalink to this headline">¶</a></h4>
<p>This role will gather all hosts from the inventory, and add them, using all their known internal network connections ip, into <em>/etc/hosts</em> file.</p>
<p>System administrator can reduce the scope of this gathering using <strong>hosts_file.range</strong> variable in <em>/etc/bluebanquise/inventory/group_vars/all/general_settings/general.yml</em>.
Setting <strong>range</strong> to <em>all</em> will use all Ansible inventory hosts, while setting <strong>range</strong> to <em>iceberg</em> will reduce the gathering to the current host iceberg.</p>
<div class="highlight-yaml"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">hosts_file</span><span class="p p-Indicator">:</span>  <span class="l l-Scalar l-Scalar-Plain">&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;</span>
  <span class="l l-Scalar l-Scalar-Plain">range</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">all</span> <span class="c1"># can be all (all hosts) or iceberg (iceberg only)</span>
</pre></div>
</div>
<p>Another feature is available in this hosts role. In case of multiple icebergs, system administrator may need to define a global network, shared by all nodes of a specific group. This is especially needed in HPC for computational nodes to communicates through an interconnect network.</p>
<p>If using such global network, it is possible to ask this role to define <strong>direct</strong> hosts resolutions of a specific Ansible group to be not on their regular management network, but be set directly on the global network (mostly used in combinaison with slurm and mpi stacks).</p>
<p>To do so, uncomment and edit variable <strong>global_network_settings</strong> in file <em>/etc/bluebanquise/inventory/group_vars/all/general_settings/network.yml</em>. Note that the role will ignore this variable if it is commented, and will try to use it if not commented.</p>
<div class="highlight-yaml"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">global_network_settings</span><span class="p p-Indicator">:</span>  <span class="l l-Scalar l-Scalar-Plain">&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;</span>
  <span class="l l-Scalar l-Scalar-Plain">global_network</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">interconnect-1</span>  <span class="c1"># Define the global network, must exist in networks files</span>
  <span class="l l-Scalar l-Scalar-Plain">global_network_group</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">mg_computes</span>  <span class="c1"># Define which group of nodes should use global_network direct resolution</span>
</pre></div>
</div>
<p>Last point, external hosts defined in <em>group_vars/all/general_settings/external.yml</em> at variable <strong>external_hosts</strong> will be automatically added in the <em>/etc/hosts</em> file.</p>
</div>
<div class="section" id="id14">
<h4>7.1.6.3. Changelog<a class="headerlink" href="#id14" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>1.0.4: Rewrite whole macro, add BMC alias. Benoit Leveugle &lt;<a class="reference external" href="mailto:benoit&#46;leveugle&#37;&#52;&#48;gmail&#46;com">benoit<span>&#46;</span>leveugle<span>&#64;</span>gmail<span>&#46;</span>com</a>&gt;</li>
<li>1.0.3: Accelerated mode. Benoit Leveugle &lt;<a class="reference external" href="mailto:benoit&#46;leveugle&#37;&#52;&#48;gmail&#46;com">benoit<span>&#46;</span>leveugle<span>&#64;</span>gmail<span>&#46;</span>com</a>&gt;</li>
<li>1.0.2: Added role version. johnnykeats &lt;<a class="reference external" href="mailto:johnny&#46;keats&#37;&#52;&#48;outlook&#46;com">johnny<span>&#46;</span>keats<span>&#64;</span>outlook<span>&#46;</span>com</a>&gt;</li>
<li>1.0.1: Documentation. johnnykeats &lt;<a class="reference external" href="mailto:johnny&#46;keats&#37;&#52;&#48;outlook&#46;com">johnny<span>&#46;</span>keats<span>&#64;</span>outlook<span>&#46;</span>com</a>&gt;</li>
<li>1.0.0: Role creation. Benoit Leveugle &lt;<a class="reference external" href="mailto:benoit&#46;leveugle&#37;&#52;&#48;gmail&#46;com">benoit<span>&#46;</span>leveugle<span>&#64;</span>gmail<span>&#46;</span>com</a>&gt;</li>
</ul>
</div>
</div>
<div class="section" id="log-server">
<h3>7.1.7. Log server<a class="headerlink" href="#log-server" title="Permalink to this headline">¶</a></h3>
<div class="section" id="id15">
<h4>7.1.7.1. Description<a class="headerlink" href="#id15" title="Permalink to this headline">¶</a></h4>
<p>This role provides an rsyslog server to gather logs of all hosts.</p>
</div>
<div class="section" id="id16">
<h4>7.1.7.2. Instructions<a class="headerlink" href="#id16" title="Permalink to this headline">¶</a></h4>
<p>All logs are separated by systemd instances into /var/log/rsyslog/ .</p>
</div>
<div class="section" id="id17">
<h4>7.1.7.3. Changelog<a class="headerlink" href="#id17" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>1.0.1: Fixed bad template. Documentation. johnnykeats &lt;<a class="reference external" href="mailto:johnny&#46;keats&#37;&#52;&#48;outlook&#46;com">johnny<span>&#46;</span>keats<span>&#64;</span>outlook<span>&#46;</span>com</a>&gt;</li>
<li>1.0.0: Role creation. Benoit Leveugle &lt;<a class="reference external" href="mailto:benoit&#46;leveugle&#37;&#52;&#48;gmail&#46;com">benoit<span>&#46;</span>leveugle<span>&#64;</span>gmail<span>&#46;</span>com</a>&gt;</li>
</ul>
</div>
</div>
<div class="section" id="log-client">
<h3>7.1.8. Log client<a class="headerlink" href="#log-client" title="Permalink to this headline">¶</a></h3>
<div class="section" id="id18">
<h4>7.1.8.1. Description<a class="headerlink" href="#id18" title="Permalink to this headline">¶</a></h4>
<p>This role provides an rsyslog client, to be used in combinaison with the log_server role.</p>
</div>
<div class="section" id="id19">
<h4>7.1.8.2. Instructions<a class="headerlink" href="#id19" title="Permalink to this headline">¶</a></h4>
<p>NA</p>
</div>
<div class="section" id="to-be-done">
<h4>7.1.8.3. To be done<a class="headerlink" href="#to-be-done" title="Permalink to this headline">¶</a></h4>
<p>Integrate journalctl logging instead of rsyslog.</p>
</div>
<div class="section" id="id20">
<h4>7.1.8.4. Changelog<a class="headerlink" href="#id20" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>1.0.1: Fixed bad template. Documentation. johnnykeats &lt;<a class="reference external" href="mailto:johnny&#46;keats&#37;&#52;&#48;outlook&#46;com">johnny<span>&#46;</span>keats<span>&#64;</span>outlook<span>&#46;</span>com</a>&gt;</li>
<li>1.0.0: Role creation. Benoit Leveugle &lt;<a class="reference external" href="mailto:benoit&#46;leveugle&#37;&#52;&#48;gmail&#46;com">benoit<span>&#46;</span>leveugle<span>&#64;</span>gmail<span>&#46;</span>com</a>&gt;</li>
</ul>
</div>
</div>
<div class="section" id="nfs-server">
<h3>7.1.9. NFS server<a class="headerlink" href="#nfs-server" title="Permalink to this headline">¶</a></h3>
<div class="section" id="id21">
<h4>7.1.9.1. Description<a class="headerlink" href="#id21" title="Permalink to this headline">¶</a></h4>
<p>This role provides an automatic nfs server that export on good networks desired directories.</p>
</div>
<div class="section" id="id22">
<h4>7.1.9.2. Instructions<a class="headerlink" href="#id22" title="Permalink to this headline">¶</a></h4>
<p>All configuration is done in <em>group_vars/all/general_settings/nfs.yml</em>:</p>
<div class="highlight-yaml"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">nfs</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">softwares</span><span class="p p-Indicator">:</span>                                    <span class="c1"># Internal name of the nfs share</span>
    <span class="l l-Scalar l-Scalar-Plain">mount</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">/opt/softwares</span>                       <span class="c1"># What path server should export</span>
    <span class="l l-Scalar l-Scalar-Plain">export</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">/opt/softwares</span>                      <span class="c1"># Which path clients should mount this NFS (will be automatically created by client role)</span>
    <span class="l l-Scalar l-Scalar-Plain">server</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">arngrim</span>                             <span class="c1"># The server that export this storage space</span>
    <span class="l l-Scalar l-Scalar-Plain">clients_groups</span><span class="p p-Indicator">:</span>                             <span class="c1"># Group of hosts that will mount it. Can be an equipment group, or a main group (mg), or any other ansible group</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">mg_computes</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">mg_logins</span>
    <span class="l l-Scalar l-Scalar-Plain">take_over_network</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">ice1-1</span>                   <span class="c1"># Network used to share this storage space</span>
    <span class="l l-Scalar l-Scalar-Plain">export_arguments</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">ro,no_root_squash,async</span>   <span class="c1"># Arguments for the server (export)</span>
    <span class="l l-Scalar l-Scalar-Plain">mount_arguments</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">ro,intr,nfsvers=4.2,bg</span>     <span class="c1"># Arguments for the client (mount)</span>
</pre></div>
</div>
<p>This role will not modify default nfs server configuration (number of threads, nfs v4.2 force, etc).</p>
<p>Do not forget to restart nfs server service when you update configuration for changes to take effect.</p>
</div>
<div class="section" id="id23">
<h4>7.1.9.3. Changelog<a class="headerlink" href="#id23" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>1.0.2: Added Ubuntu 18.04 compatibility. johnnykeats &lt;<a class="reference external" href="mailto:johnny&#46;keats&#37;&#52;&#48;outlook&#46;com">johnny<span>&#46;</span>keats<span>&#64;</span>outlook<span>&#46;</span>com</a>&gt;</li>
<li>1.0.1: Fixed bad template. Documentation. johnnykeats &lt;<a class="reference external" href="mailto:johnny&#46;keats&#37;&#52;&#48;outlook&#46;com">johnny<span>&#46;</span>keats<span>&#64;</span>outlook<span>&#46;</span>com</a>&gt;</li>
<li>1.0.0: Role creation. Benoit Leveugle &lt;<a class="reference external" href="mailto:benoit&#46;leveugle&#37;&#52;&#48;gmail&#46;com">benoit<span>&#46;</span>leveugle<span>&#64;</span>gmail<span>&#46;</span>com</a>&gt;</li>
</ul>
</div>
</div>
<div class="section" id="nfs-client">
<h3>7.1.10. NFS client<a class="headerlink" href="#nfs-client" title="Permalink to this headline">¶</a></h3>
<div class="section" id="id24">
<h4>7.1.10.1. Description<a class="headerlink" href="#id24" title="Permalink to this headline">¶</a></h4>
<p>This role provides an automatic nfs client that mount targets and create local directories if needed.</p>
</div>
<div class="section" id="id25">
<h4>7.1.10.2. Instructions<a class="headerlink" href="#id25" title="Permalink to this headline">¶</a></h4>
<p>All configuration is done in <em>group_vars/all/general_settings/nfs.yml</em>.</p>
<p>See the <strong>nfs_server</strong> role isntructions for more details.</p>
<p>Simply note that path that should be mounted will be automatically created by this role if they do not exist.</p>
</div>
<div class="section" id="id26">
<h4>7.1.10.3. Changelog<a class="headerlink" href="#id26" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>1.0.2: Added Ubuntu 18.04 compatibility. johnnykeats &lt;<a class="reference external" href="mailto:johnny&#46;keats&#37;&#52;&#48;outlook&#46;com">johnny<span>&#46;</span>keats<span>&#64;</span>outlook<span>&#46;</span>com</a>&gt;</li>
<li>1.0.1: Fixed bad template. Documentation. johnnykeats &lt;<a class="reference external" href="mailto:johnny&#46;keats&#37;&#52;&#48;outlook&#46;com">johnny<span>&#46;</span>keats<span>&#64;</span>outlook<span>&#46;</span>com</a>&gt;</li>
<li>1.0.0: Role creation. Benoit Leveugle &lt;<a class="reference external" href="mailto:benoit&#46;leveugle&#37;&#52;&#48;gmail&#46;com">benoit<span>&#46;</span>leveugle<span>&#64;</span>gmail<span>&#46;</span>com</a>&gt;</li>
</ul>
</div>
</div>
<div class="section" id="nic">
<h3>7.1.11. NIC<a class="headerlink" href="#nic" title="Permalink to this headline">¶</a></h3>
<div class="section" id="id27">
<h4>7.1.11.1. Description<a class="headerlink" href="#id27" title="Permalink to this headline">¶</a></h4>
<p>This role configure network interfaces to provide desired ip, prefix, gateway, etc.</p>
</div>
<div class="section" id="id28">
<h4>7.1.11.2. Instructions<a class="headerlink" href="#id28" title="Permalink to this headline">¶</a></h4>
<p>This role provide network configuration based on system files (ifcfg files for RHEL/Centos systems).</p>
<p>User need to restart network or interfaces one by one for changes to take effect after role execution.</p>
<p>Network interfaces configurations are done at host level:</p>
<div class="highlight-yaml"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">network_interfaces</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">enp0s3</span><span class="p p-Indicator">:</span>                    <span class="c1"># Interface name on system</span>
    <span class="l l-Scalar l-Scalar-Plain">ip4</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">10.11.0.1</span>           <span class="c1"># ip v4 to be set</span>
    <span class="l l-Scalar l-Scalar-Plain">mac</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">08:00:27:de:42:22</span>   <span class="c1"># MAC address of this NIC</span>
    <span class="l l-Scalar l-Scalar-Plain">network</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">ice1-1</span>          <span class="c1"># Logical network connected to</span>
</pre></div>
</div>
<p>By default, connections are of type ethernet. It is possible to specify connection type, for example infiniband:</p>
<div class="highlight-yaml"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">network_interfaces</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">ib0</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">ip4</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">10.20.0.1</span>
    <span class="l l-Scalar l-Scalar-Plain">network</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">interconnect-1</span>
    <span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">infiniband</span>
</pre></div>
</div>
<p>To configure an LACP bonding, specify slave interfaces, and then create the bond, using bond-slave type and bond type:</p>
<div class="highlight-yaml"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">network_interfaces</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">eth0</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">bond-slave</span>
    <span class="l l-Scalar l-Scalar-Plain">master</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">bond0</span>
  <span class="l l-Scalar l-Scalar-Plain">eth1</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">bond-slave</span>
    <span class="l l-Scalar l-Scalar-Plain">master</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">bond0</span>
  <span class="l l-Scalar l-Scalar-Plain">bond0</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">bond</span>
    <span class="l l-Scalar l-Scalar-Plain">vlan</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>
    <span class="l l-Scalar l-Scalar-Plain">bond_options</span><span class="p p-Indicator">:</span> <span class="s">&quot;mode=4</span><span class="nv"> </span><span class="s">xmit_hash_policy=layer3+4</span><span class="nv"> </span><span class="s">miimon=100</span><span class="nv"> </span><span class="s">lacp_rate=1&quot;</span>
</pre></div>
</div>
<p>To configure a vlan, simply set vlan to true:</p>
<div class="highlight-yaml"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">network_interfaces</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">eth2.100</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">vlan</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
    <span class="l l-Scalar l-Scalar-Plain">ip4</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">10.100.0.1</span>
    <span class="l l-Scalar l-Scalar-Plain">network</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">net-100</span>
</pre></div>
</div>
<p>MTU and/or Gateway can be set in the network file, and will be applyed to NIC linked to this network.</p>
<div class="highlight-yaml"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">networks</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">ice1-1</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">subnet</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">10.10.0.0</span>
    <span class="l l-Scalar l-Scalar-Plain">prefix</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">16</span>
    <span class="l l-Scalar l-Scalar-Plain">netmask</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">255.255.0.0</span>
    <span class="l l-Scalar l-Scalar-Plain">broadcast</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">10.10.255.255</span>
    <span class="l l-Scalar l-Scalar-Plain">dhcp_unknown_range</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">10.10.254.1 10.10.254.254</span>
    <span class="l l-Scalar l-Scalar-Plain">gateway</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">10.10.2.1     &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;</span>
    <span class="l l-Scalar l-Scalar-Plain">mtu</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">9000              &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;</span>
    <span class="l l-Scalar l-Scalar-Plain">is_in_dhcp</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
    <span class="l l-Scalar l-Scalar-Plain">is_in_dns</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
    <span class="l l-Scalar l-Scalar-Plain">services_ip</span><span class="p p-Indicator">:</span>
      <span class="l l-Scalar l-Scalar-Plain">pxe_ip</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">10.10.0.1</span>
      <span class="l l-Scalar l-Scalar-Plain">dns_ip</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">10.10.0.1</span>
      <span class="l l-Scalar l-Scalar-Plain">repository_ip</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">10.10.0.1</span>
      <span class="l l-Scalar l-Scalar-Plain">authentication_ip</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">10.10.0.1</span>
      <span class="l l-Scalar l-Scalar-Plain">time_ip</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">10.10.0.1</span>
      <span class="l l-Scalar l-Scalar-Plain">log_ip</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">10.10.0.1</span>
</pre></div>
</div>
</div>
<div class="section" id="id29">
<h4>7.1.11.3. To be done<a class="headerlink" href="#id29" title="Permalink to this headline">¶</a></h4>
<p>Add Ubuntu and Opensuse compatiblity if asked for.</p>
</div>
<div class="section" id="id30">
<h4>7.1.11.4. Changelog<a class="headerlink" href="#id30" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>1.0.0: Role creation. Benoit Leveugle &lt;<a class="reference external" href="mailto:benoit&#46;leveugle&#37;&#52;&#48;gmail&#46;com">benoit<span>&#46;</span>leveugle<span>&#64;</span>gmail<span>&#46;</span>com</a>&gt;</li>
</ul>
</div>
</div>
<div class="section" id="pxe-stack">
<h3>7.1.12. PXE Stack<a class="headerlink" href="#pxe-stack" title="Permalink to this headline">¶</a></h3>
<div class="section" id="id31">
<h4>7.1.12.1. Description<a class="headerlink" href="#id31" title="Permalink to this headline">¶</a></h4>
<p>This role provides the whole PXE stack. It is a key feature of the stack (and we are prood of it :-D).</p>
</div>
<div class="section" id="id32">
<h4>7.1.12.2. Instructions<a class="headerlink" href="#id32" title="Permalink to this headline">¶</a></h4>
<p>This role will deploy all the needed files, binaries, and scripts to deploy remote hosts using PXE (or even USB and CD boot).</p>
<p>The role take place just after the dhcp in the PXE deployment, and will configure all the iPXE chain needed after dhcp provided hosts with next-server ip and filename to use.</p>
<div class="section" id="files-location">
<h5>7.1.12.2.1. <strong>Files location</strong><a class="headerlink" href="#files-location" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li>PXE boot files are located in /var/www/html/preboot_execution_environment/.
* <em>bin/</em> directory contains some needed bin files, typically grub2 files for EFI boot.
* <em>equipment_profiles/</em> directory contains equipment_profiles related files, i.e. ipxe file with group variables, and os configuration files (kickstart, preseed, autoyast).
* <em>nodes/</em> directory contains hosts dedicated files, i.e. ipxe file with hosts dedicated variables.
* <em>osdeploy/</em> directory contains static files, with paterns to boot each kind of supported distributions.</li>
<li>Basic configuration files are located in /etc/bluebanquise/pxe/.
* <em>nodes_parameters.yml</em> contains all nodes PXE needed parameters.
* <em>pxe_parameters.yml</em> contains needed values for scripts to adapt to <strong>current pxe server host</strong> (these parameters do not apply to PXE booted hosts !!).</li>
<li>Scripts are located in /usr/bin/.</li>
</ul>
</div>
<div class="section" id="inventory-configuration">
<h5>7.1.12.2.2. <strong>Inventory configuration</strong><a class="headerlink" href="#inventory-configuration" title="Permalink to this headline">¶</a></h5>
<p>This role will rely on multiple parts of the inventory, and is probably the most “invasive” role of the whole stack.</p>
<ul class="simple">
<li>equipment_profile dictionarries are used for each equipment_profile group. All boot confiuration is made relying on it (operating system, cpu architecture, console, kernel parameters, etc.). It is recommanded to ensure coherency of the equipment_profile files.</li>
<li>authentication dictionarry is used to provide root password and default ssh authorized key.</li>
<li>hosts <strong>network_interfaces</strong> dedicated variables, to be able to force static ip at kernel boot.</li>
</ul>
</div>
<div class="section" id="bootset-usage">
<h5>7.1.12.2.3. <strong>bootset usage</strong><a class="headerlink" href="#bootset-usage" title="Permalink to this headline">¶</a></h5>
<p>Once the role is deployed, and hosts gathered into <em>/etc/bluebanquise/pxe/nodes_parameters.yml</em>, the bootset tool can be used to manipulate remote hosts PXE boot. By default, 3 states can be defined for each host:</p>
<ul class="simple">
<li>osdeploy: the remote host will deploy/redeploy its operating system, using inventory equipment_profile parameters of its equipment profile group.</li>
<li>disk: the remote host will boot on disk. This parameter is automatically set after a sucessful <strong>osdeploy</strong>.</li>
<li>diskless: the remote host will boot using a diskless mechanism. This diskless boot is generic, and is handled by an optional external role.</li>
</ul>
<p>Again, consider that if you set an host to osdeploy, and that it suceed its deployment, stack will automatically set the host into disk boot for next boot, to avoid infinite reinstallation loop.</p>
<p>To get bootset help, use:</p>
<div class="highlight-text"><div class="highlight"><pre><span></span>bootset -h
</pre></div>
</div>
<p>To ask an host to deploy/redeploy its operating system, use:</p>
<div class="highlight-text"><div class="highlight"><pre><span></span>bootset -n c001 -b osdeploy
</pre></div>
</div>
<p>With c001 the target host to be redeployed.</p>
<p>To set this host to boot on disk, use:</p>
<div class="highlight-text"><div class="highlight"><pre><span></span>bootset -n c001 -b disk
</pre></div>
</div>
<p>It is also possible to work on a range of host, using nodeset formating:</p>
<div class="highlight-text"><div class="highlight"><pre><span></span>bootset -n c001,c002,c[010-020],login1 -b disk
</pre></div>
</div>
<p>If some inventory parameters related to the host have been updated recently, it may be required to force files regeneration instead of simply modifying them. To do so, use:</p>
<div class="highlight-text"><div class="highlight"><pre><span></span>bootset -n c001 -b osdeploy -f update
</pre></div>
</div>
<p>Also, on some “difficult” networks, system administrator may require to force static ip at boot. This can be achieved using:</p>
<div class="highlight-text"><div class="highlight"><pre><span></span>bootset -n c001 -b osdeploy -f network
</pre></div>
</div>
<p>Or in combinaison with update, using comma separated:</p>
<div class="highlight-text"><div class="highlight"><pre><span></span>bootset -n c001 -b osdeploy -f update,network
</pre></div>
</div>
<p>The tool is relatively verbose, and should provide all needed information on the fly on what it is doing.</p>
<p>Last part, regarding diskless. An image name need to be provided:</p>
<div class="highlight-text"><div class="highlight"><pre><span></span>bootset -n c001 -b diskless -i myimage
</pre></div>
</div>
<p>This part should be covered in a diskless related role, and is not in the scope of this role.</p>
</div>
<div class="section" id="ipxe-chain">
<h5>7.1.12.2.4. <strong>iPXE chain</strong><a class="headerlink" href="#ipxe-chain" title="Permalink to this headline">¶</a></h5>
<p>PXE part of the <strong>BlueBanquise</strong> stack relies heavily on iPXE, and its chain mechanism. This chain has multiple purposes:</p>
<ul class="simple">
<li>Most important, it is verbose, and can be manually manipulated or followed (watching http server logs).</li>
<li>It is flexible, and can adapt to nearly any configuration (disk boot, os deployment, diskless, …).</li>
<li>It can operate on all hardware, from server to laptop. It can even be started from USB or CD image for non PXE able systems.</li>
</ul>
<p>Some steps may seems weird or unnecessary, but are here on purpose: verbosity and debug, as PXE part is always the trickiest.</p>
<p>Some vocabulary: in the following document, <strong>chain* or **chaining</strong> refers to the iPXE mechanism that download and execute a new file, after the current one.</p>
<p>Also, all files root is assumed <em>/var/www/html/preboot_execution_environnement</em> on the next-server (the server on which this pxe_stack role has been deployed).</p>
<p>The whole process can be resumed in one detailed schema:</p>
<img alt="_images/iPXE_chain.svg" src="_images/iPXE_chain.svg" /><p>To be macroscopic:</p>
<ol class="arabic simple">
<li>The remote host boot over PXE, in EFI/legacy-bios, using its own PXE/iPXE rom.</li>
<li>The dhcp deployed by BlueBanquise will provide the host with the <strong>BlueBanquise</strong> iPXE rom. This iPXE rom contains an EMBED script that will display the logo, get an ip from the dhcp server, show some information, and chain to file <em>convergence.ipxe</em>.</li>
<li><em>convergence.ipxe</em> will simply get the current architecture. This operation cannot be done into the EMBED script has it needs some logic, that could bug. Sys admin need to easily debug this whithout the need to rebuild iPXE roms. Then iPXE chain to <em>nodes/${hostname}.ipxe</em> with <em>hostname</em> the hostname provided by the dhcp server.</li>
<li><em>nodes/${hostname}.ipxe</em> will define all host dedicated parameters, and also what host should do: boot on disk, deploy os, or boot in diskless. Then iPXE chain to <em>equipment_profiles/${equipment-profile}.ipxe</em>, with <em>equipment-profile</em> a variable defined in the current file.</li>
<li><em>equipment_profiles/${equipment-profile}.ipxe</em> contains the host equipment profile group parameters, like operating system, console, kernel parameters, etc. Then iPXE chain to <em>menu.ipxe</em>.</li>
<li><em>menu.ipxe</em> will display a basic menu on screen, with default set to what node is expected to do (this was gathered in <em>nodes/${hostname}.ipxe</em>). Timeout is 10s by default before host execute the expected action. Then, iPXE chain to:</li>
</ol>
<blockquote>
<div><ul class="simple">
<li><em>osdeploy/${eq-distribution}_${eq-distribution-major-version}.ipxe</em> if host needs to deploy/redeploy its operating system. These osdeploy files are dynamic, and adapt to parameters gathered in host dedicated file and host equipment_profile file.</li>
<li><em>diskless/images/${diskless-image}/boot.ipxe</em> if host needs to boot in diskless.</li>
<li><em>sanboot –no-describe –drive 0x80</em> if host is legacy/bios/pcbios based. This is a simple command that boot on disk.</li>
<li><em>bin/${arch}/grub2_efi_autofind.img</em> if host is EFI based. This grub2 image will look for a disk with a know operating system, and boot on it.</li>
</ul>
</div></blockquote>
<p>In case of an OS deployment, if this deployment succeed, in the post install script section, remote host will ask, using a curl command on its side and an CGI python script on server side (<em>/var/www/cgi-bin/bootswitch.cgi</em>), to boot next to disk. This CGI python script will simply edit <em>node/${hostname}.ipxe</em> file and change its default boot to <strong>bootdisk</strong>.</p>
<p>All files are manually editable. Also, note that an unregistered host (so no hostnames provided by the dhcp) will try to load <em>nodes/.ipxe</em> file. By default, this file will simply provide an iPXE shell, but system administrator can tune this file to specific purposes.</p>
<p>To follow the deployment process, simply tail -f logs of http server, and see the whole process occuring.</p>
</div>
</div>
<div class="section" id="id33">
<h4>7.1.12.3. To be done<a class="headerlink" href="#id33" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>Issue when deploying ubuntu 18.04. Very long hang after packages check. Install continue after like 10 minutes of hang. Not blocking but boring…</li>
</ul>
</div>
<div class="section" id="id34">
<h4>7.1.12.4. Changelog<a class="headerlink" href="#id34" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>1.1.1: bootset.py refactoring. Adrien Ribeiro &lt;<a class="reference external" href="mailto:adrien&#46;ribeiro&#37;&#52;&#48;atos&#46;net">adrien<span>&#46;</span>ribeiro<span>&#64;</span>atos<span>&#46;</span>net</a>&gt;</li>
<li>1.1.0: Rewamped the whole role. Benoit Leveugle &lt;<a class="reference external" href="mailto:benoit&#46;leveugle&#37;&#52;&#48;gmail&#46;com">benoit<span>&#46;</span>leveugle<span>&#64;</span>gmail<span>&#46;</span>com</a>&gt;</li>
<li>1.0.2: Add Ubuntu 18.04 compatibility. johnnykeats &lt;<a class="reference external" href="mailto:johnny&#46;keats&#37;&#52;&#48;outlook&#46;com">johnny<span>&#46;</span>keats<span>&#64;</span>outlook<span>&#46;</span>com</a>&gt;</li>
<li>1.0.1: Documentation. johnnykeats &lt;<a class="reference external" href="mailto:johnny&#46;keats&#37;&#52;&#48;outlook&#46;com">johnny<span>&#46;</span>keats<span>&#64;</span>outlook<span>&#46;</span>com</a>&gt;</li>
<li>1.0.0: Role creation. Benoit Leveugle &lt;<a class="reference external" href="mailto:benoit&#46;leveugle&#37;&#52;&#48;gmail&#46;com">benoit<span>&#46;</span>leveugle<span>&#64;</span>gmail<span>&#46;</span>com</a>&gt;</li>
</ul>
</div>
</div>
<div class="section" id="repositories-server">
<h3>7.1.13. Repositories server<a class="headerlink" href="#repositories-server" title="Permalink to this headline">¶</a></h3>
<div class="section" id="id35">
<h4>7.1.13.1. Description<a class="headerlink" href="#id35" title="Permalink to this headline">¶</a></h4>
<p>This role simply configure repositories server (only install and start web server).</p>
</div>
<div class="section" id="id36">
<h4>7.1.13.2. Instructions<a class="headerlink" href="#id36" title="Permalink to this headline">¶</a></h4>
<p>This role simply install an http server. Repositories files manupulations have to be done manually by system administrator.</p>
<p>Note that repositories structure follows a specific pattern:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>           Distribution    Version   Architecture    Repository
                 +             +       +               +
                 <span class="p">|</span>             +---+   <span class="p">|</span>               <span class="p">|</span>
                 +-----------+     <span class="p">|</span>   <span class="p">|</span>      +--------+
                             <span class="p">|</span>     <span class="p">|</span>   <span class="p">|</span>      <span class="p">|</span>
                             v     v   v      v
/var/www/html/repositories/centos/7.6/x86_64/os
</pre></div>
</div>
<p>System administrator should create these directories manually, and put packages inside.</p>
<p>Then, repositories that will be setup on clients are stored by default in <em>/etc/bluebanquise/inventory/group_vars/all/general_settings/repositories.yml</em>.</p>
<p>Keep in mind that it is possible to precedence this file in equipment_profiles groupes, and so put a repository file in for example <em>/etc/bluebanquise/inventory/group_vars/equipment_supermicro_sandy_compute</em> that will be considered by these nodes over the default one. This can be useful to define diferent repositories for diferent equipments.</p>
</div>
<div class="section" id="id37">
<h4>7.1.13.3. Changelog<a class="headerlink" href="#id37" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>1.0.2: Regrouped all distribs into a main file. johnnykeats &lt;<a class="reference external" href="mailto:johnny&#46;keats&#37;&#52;&#48;outlook&#46;com">johnny<span>&#46;</span>keats<span>&#64;</span>outlook<span>&#46;</span>com</a>&gt;</li>
<li>1.0.1: Documentation. johnnykeats &lt;<a class="reference external" href="mailto:johnny&#46;keats&#37;&#52;&#48;outlook&#46;com">johnny<span>&#46;</span>keats<span>&#64;</span>outlook<span>&#46;</span>com</a>&gt;</li>
<li>1.0.0: Role creation. Benoit Leveugle &lt;<a class="reference external" href="mailto:benoit&#46;leveugle&#37;&#52;&#48;gmail&#46;com">benoit<span>&#46;</span>leveugle<span>&#64;</span>gmail<span>&#46;</span>com</a>&gt;</li>
</ul>
</div>
</div>
<div class="section" id="repositories-client">
<h3>7.1.14. Repositories client<a class="headerlink" href="#repositories-client" title="Permalink to this headline">¶</a></h3>
<div class="section" id="id38">
<h4>7.1.14.1. Description<a class="headerlink" href="#id38" title="Permalink to this headline">¶</a></h4>
<p>This role simply configure repositories for client hosts.</p>
</div>
<div class="section" id="id39">
<h4>7.1.14.2. Instructions<a class="headerlink" href="#id39" title="Permalink to this headline">¶</a></h4>
<p>See repositries_server role instructions for more details.</p>
</div>
<div class="section" id="id40">
<h4>7.1.14.3. To be done<a class="headerlink" href="#id40" title="Permalink to this headline">¶</a></h4>
<p>Need to clear up the Ubuntu repositories process, still not clear how to handle own made repos and officials repos as Ubuntu add local repos everywhere in the sources.list file.</p>
</div>
<div class="section" id="id41">
<h4>7.1.14.4. Changelog<a class="headerlink" href="#id41" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>1.0.2: Added Ubuntu 18.04 compatibility. johnnykeats &lt;<a class="reference external" href="mailto:johnny&#46;keats&#37;&#52;&#48;outlook&#46;com">johnny<span>&#46;</span>keats<span>&#64;</span>outlook<span>&#46;</span>com</a>&gt;</li>
<li>1.0.1: Documentation. johnnykeats &lt;<a class="reference external" href="mailto:johnny&#46;keats&#37;&#52;&#48;outlook&#46;com">johnny<span>&#46;</span>keats<span>&#64;</span>outlook<span>&#46;</span>com</a>&gt;</li>
<li>1.0.0: Role creation. Benoit Leveugle &lt;<a class="reference external" href="mailto:benoit&#46;leveugle&#37;&#52;&#48;gmail&#46;com">benoit<span>&#46;</span>leveugle<span>&#64;</span>gmail<span>&#46;</span>com</a>&gt;</li>
</ul>
</div>
</div>
<div class="section" id="set-hostname">
<h3>7.1.15. Set Hostname<a class="headerlink" href="#set-hostname" title="Permalink to this headline">¶</a></h3>
<div class="section" id="id42">
<h4>7.1.15.1. Description<a class="headerlink" href="#id42" title="Permalink to this headline">¶</a></h4>
<p>This role simply set a node hostname.</p>
</div>
<div class="section" id="id43">
<h4>7.1.15.2. Instructions<a class="headerlink" href="#id43" title="Permalink to this headline">¶</a></h4>
<p>NA.</p>
</div>
<div class="section" id="id44">
<h4>7.1.15.3. Changelog<a class="headerlink" href="#id44" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>1.0.1: Documentation. johnnykeats &lt;<a class="reference external" href="mailto:johnny&#46;keats&#37;&#52;&#48;outlook&#46;com">johnny<span>&#46;</span>keats<span>&#64;</span>outlook<span>&#46;</span>com</a>&gt;</li>
<li>1.0.0: Role creation. Benoit Leveugle &lt;<a class="reference external" href="mailto:benoit&#46;leveugle&#37;&#52;&#48;gmail&#46;com">benoit<span>&#46;</span>leveugle<span>&#64;</span>gmail<span>&#46;</span>com</a>&gt;</li>
</ul>
</div>
</div>
<div class="section" id="ssh-master">
<h3>7.1.16. SSH master<a class="headerlink" href="#ssh-master" title="Permalink to this headline">¶</a></h3>
<div class="section" id="id45">
<h4>7.1.16.1. Description<a class="headerlink" href="#id45" title="Permalink to this headline">¶</a></h4>
<p>This role configure the ssh access of know hosts to make this access through nodes main network.</p>
</div>
<div class="section" id="id46">
<h4>7.1.16.2. Instructions<a class="headerlink" href="#id46" title="Permalink to this headline">¶</a></h4>
<p>This role will generate a Configuration file in <em>/root/.ssh/config</em>.</p>
<p>This file will contains all hosts of the Ansible inventory (or all hosts of the current iceberg if using icebergs mode), with the following parameters:</p>
<div class="highlight-text"><div class="highlight"><pre><span></span>Host freya
    StrictHostKeyChecking no
    UserKnownHostsFile=/dev/null
    Hostname %h-ice1-1
</pre></div>
</div>
<p>This ensure no issues when redeploying an hosts.</p>
<p>Also, note that for this example host, <strong>freya</strong>, the target hostname for ssh is %h-ice1-1, which means <strong>freya-ice1-1</strong>. This can be seen when invoking ssh with verbosity:</p>
<div class="highlight-text"><div class="highlight"><pre><span></span>[root@odin ]# ssh freya -vvv
OpenSSH_7.8p1, OpenSSL 1.1.1 FIPS  11 Sep 2018
debug1: Reading configuration data /root/.ssh/config
debug1: /root/.ssh/config line 10: Applying options for freya
debug1: Reading configuration data /etc/ssh/ssh_config
debug3: /etc/ssh/ssh_config line 52: Including file /etc/ssh/ssh_config.d/05-redhat.conf depth 0
debug1: Reading configuration data /etc/ssh/ssh_config.d/05-redhat.conf
debug3: /etc/ssh/ssh_config.d/05-redhat.conf line 2: Including file /etc/crypto-policies/back-ends/openssh.config depth 1
debug1: Reading configuration data /etc/crypto-policies/back-ends/openssh.config
debug3: gss kex names ok: [gss-gex-sha1-,gss-group14-sha1-]
debug3: kex names ok: [curve25519-sha256@libssh.org,ecdh-sha2-nistp256,ecdh-sha2-nistp384,ecdh-sha2-nistp521,diffie-hellman-group-exchange-sha256,diffie-hellman-group14-sha256,diffie-hellman-group16-sha512,diffie-hellman-group18-sha512,diffie-hellman-group-exchange-sha1,diffie-hellman-group14-sha1]
debug1: /etc/ssh/ssh_config.d/05-redhat.conf line 8: Applying options for *
debug2: resolving &quot;freya-ice1-1&quot; port 22
debug2: ssh_connect_direct
debug1: Connecting to freya-ice1-1 [10.11.2.1] port 22.
</pre></div>
</div>
<p>You can see here ssh is not trying to reach <strong>freya</strong> but is using <strong>freya-ice-1-1</strong>. This has been made to ensure whatever the direct resolution is in /etc/hosts file or DNS, ssh and so Ansible will always use the management network of the target host.</p>
<p>Note that this file generation is kind of “sensible”, and will surely be the first one to break in case of uncoherent inventory. If this happens, check your inventory, fix it, and remove manually /root/.ssh/config and relaunch its generation.</p>
</div>
<div class="section" id="id47">
<h4>7.1.16.3. To be done<a class="headerlink" href="#id47" title="Permalink to this headline">¶</a></h4>
<p>Add ProxyJump for icebergs</p>
</div>
<div class="section" id="id48">
<h4>7.1.16.4. Changelog<a class="headerlink" href="#id48" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>1.0.1: Documentation. johnnykeats &lt;<a class="reference external" href="mailto:johnny&#46;keats&#37;&#52;&#48;outlook&#46;com">johnny<span>&#46;</span>keats<span>&#64;</span>outlook<span>&#46;</span>com</a>&gt;</li>
<li>1.0.0: Role creation. Benoit Leveugle &lt;<a class="reference external" href="mailto:benoit&#46;leveugle&#37;&#52;&#48;gmail&#46;com">benoit<span>&#46;</span>leveugle<span>&#64;</span>gmail<span>&#46;</span>com</a>&gt;</li>
</ul>
</div>
</div>
<div class="section" id="ssh-slave">
<h3>7.1.17. SSH slave<a class="headerlink" href="#ssh-slave" title="Permalink to this headline">¶</a></h3>
<div class="section" id="id49">
<h4>7.1.17.1. Description<a class="headerlink" href="#id49" title="Permalink to this headline">¶</a></h4>
<p>This role configure the ssh client authorized public key.</p>
</div>
<div class="section" id="id50">
<h4>7.1.17.2. Instructions<a class="headerlink" href="#id50" title="Permalink to this headline">¶</a></h4>
<p>This role will ensure remote hosts is having currently defined ssh authorized public keys in their <em>/root/.ssh/authorized_keys</em> file.</p>
<p>These keys are set in file <em>/etc/bluebanquise/inventory/group_vars/all/all_equipments/authentication.yml</em>.</p>
<p>Keep in mind that this file can be precedenced with equipment_profiles groups or iceberg groups.</p>
</div>
<div class="section" id="id51">
<h4>7.1.17.3. Changelog<a class="headerlink" href="#id51" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>1.0.1: Documentation. johnnykeats &lt;<a class="reference external" href="mailto:johnny&#46;keats&#37;&#52;&#48;outlook&#46;com">johnny<span>&#46;</span>keats<span>&#64;</span>outlook<span>&#46;</span>com</a>&gt;</li>
<li>1.0.0: Role creation. Benoit Leveugle &lt;<a class="reference external" href="mailto:benoit&#46;leveugle&#37;&#52;&#48;gmail&#46;com">benoit<span>&#46;</span>leveugle<span>&#64;</span>gmail<span>&#46;</span>com</a>&gt;</li>
</ul>
</div>
</div>
<div class="section" id="time-server">
<h3>7.1.18. Time server<a class="headerlink" href="#time-server" title="Permalink to this headline">¶</a></h3>
<div class="section" id="id52">
<h4>7.1.18.1. Description<a class="headerlink" href="#id52" title="Permalink to this headline">¶</a></h4>
<p>This role provides a time server/client based on Chrony.</p>
</div>
<div class="section" id="id53">
<h4>7.1.18.2. Instructions<a class="headerlink" href="#id53" title="Permalink to this headline">¶</a></h4>
<p>This role will react diffrently if in multi icebergs mode or not.</p>
<p>By default, in non multiple icebergs, server will be the time source reference. If using multiple icebergs hierarchy, then server can be a time reference if at top of the icebergs hierarchy, or simply a time relay with an higher stratum, if not a top server. This stratum calculation is done using <strong>iceberg_level</strong> variable defined in <strong>/etc/bluebanquise/inventory/cluster/icebergs/icebergX</strong> files.</p>
<p>It is possible to use file <em>/etc/bluebanquise/inventory/group_vars/all/general_settings/external.yml</em> to connect client or server to external time sources (server or pool or servers):</p>
<div class="highlight-yaml"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">external_time</span><span class="p p-Indicator">:</span>  <span class="l l-Scalar l-Scalar-Plain">&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;</span>
  <span class="l l-Scalar l-Scalar-Plain">time_server</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">server</span><span class="p p-Indicator">:</span> <span class="c1"># List of possible time servers</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">0.fr.pool.ntp.org</span>
    <span class="l l-Scalar l-Scalar-Plain">pool</span><span class="p p-Indicator">:</span> <span class="c1"># List of possible time pools</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">pool.ntp.org</span>
<span class=" -Error">  </span><span class="l l-Scalar l-Scalar-Plain">time_client</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">server</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">pool</span><span class="p p-Indicator">:</span>
</pre></div>
</div>
<p>If set to <strong>time_server</strong>, server/pool will be added in the server configuration. Of set to <strong>time_client</strong>, these will be added in client configuration. It is possible for example to not install a time server and simply bind to an external server/pool using this file.</p>
<p>In case of a need, to force time synchronisation on client side, use:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>chronyc -a makestep
</pre></div>
</div>
</div>
<div class="section" id="id54">
<h4>7.1.18.3. To be done<a class="headerlink" href="#id54" title="Permalink to this headline">¶</a></h4>
<p>Icebergs with stratums levels.</p>
</div>
<div class="section" id="id55">
<h4>7.1.18.4. Changelog<a class="headerlink" href="#id55" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>1.0.1: Documentation. johnnykeats &lt;<a class="reference external" href="mailto:johnny&#46;keats&#37;&#52;&#48;outlook&#46;com">johnny<span>&#46;</span>keats<span>&#64;</span>outlook<span>&#46;</span>com</a>&gt;</li>
<li>1.0.0: Role creation. Benoit Leveugle &lt;<a class="reference external" href="mailto:benoit&#46;leveugle&#37;&#52;&#48;gmail&#46;com">benoit<span>&#46;</span>leveugle<span>&#64;</span>gmail<span>&#46;</span>com</a>&gt;</li>
</ul>
</div>
</div>
</div>
<div class="section" id="advanced-core">
<h2>7.2. ADVANCED CORE<a class="headerlink" href="#advanced-core" title="Permalink to this headline">¶</a></h2>
<div class="section" id="advanced-dhcp-server">
<h3>7.2.1. Advanced DHCP server<a class="headerlink" href="#advanced-dhcp-server" title="Permalink to this headline">¶</a></h3>
<div class="section" id="id56">
<h4>7.2.1.1. Description<a class="headerlink" href="#id56" title="Permalink to this headline">¶</a></h4>
<p>This role provides an advanced dhcp server combined with the iPXE roms of BlueBanquise.
Features like shared_network, opt82, opt61 or snp/snponly roms are provided here for very specific configurations or needs.</p>
</div>
<div class="section" id="id57">
<h4>7.2.1.2. Instructions<a class="headerlink" href="#id57" title="Permalink to this headline">¶</a></h4>
<p>Please read first documentation of the standard dhcp server role. Advanced dhcp server provides sames features than standard dhcp server role, but with more options.</p>
<p>Dhcp will only take into account networks from the current iceberg, and with naming related to administration network (by default iceX-Y).</p>
<p>Also, ensure dhcp is set to true for your network.</p>
<div class="section" id="shared-network">
<h5>7.2.1.2.1. <strong>Shared network</strong><a class="headerlink" href="#shared-network" title="Permalink to this headline">¶</a></h5>
<p>It is possible to combine networks into shared-networks when multiple subnets are on the same NIC, or when using opt82/option_match parameter.
To do so, add a variable in the network definition.</p>
<p>For example to add ice1-1 and ice1-2 into the same shared network, define them this way:</p>
<p>Ice1-1:</p>
<div class="highlight-yaml"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">networks</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">ice1-1</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">subnet</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">10.10.0.0</span>
    <span class="l l-Scalar l-Scalar-Plain">prefix</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">16</span>
    <span class="l l-Scalar l-Scalar-Plain">shared_network</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">wolf</span>
    <span class="l l-Scalar l-Scalar-Plain">...</span>
</pre></div>
</div>
<p>And ice1-2:</p>
<div class="highlight-yaml"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">networks</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">ice1-2</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">subnet</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">10.30.0.0</span>
    <span class="l l-Scalar l-Scalar-Plain">prefix</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">16</span>
    <span class="l l-Scalar l-Scalar-Plain">shared_network</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">wolf</span>
    <span class="l l-Scalar l-Scalar-Plain">...</span>
</pre></div>
</div>
<p>shared_network variable is optional and is simply ignored if not set.</p>
</div>
<div class="section" id="opt-61-and-opt-82">
<h5>7.2.1.2.2. <strong>opt 61 and opt 82</strong><a class="headerlink" href="#opt-61-and-opt-82" title="Permalink to this headline">¶</a></h5>
<p>It is possible to use advanced dhcp features to identify an host. The following parameters are available, for the host and its BMC. Note that only one of these must be set for an host/BMC at the same time:</p>
<ul class="simple">
<li>mac: identify based on MAC address. Same than standard dhcp server.</li>
<li>dhcp_client_identifier: identify based on a patern (string, etc) to recognise an host. Also known as option 61.</li>
<li>host_identifier: identify based on an option (agent.circuit-id, agent.remote-id, etc) to recognise an host. Also known as option 82.</li>
<li>match: identify based on multiple options in combinaison to recognise an host. Also known as option 82 with hack.</li>
</ul>
<p>If using match, because this features is using a specific ‘hack’ in the dhcp server, you <strong>must</strong> define this host in a shared network, even if this shared network contains a single network (see this very well made page for more information: <a class="reference external" href="http://www.miquels.cistron.nl/isc-dhcpd/">http://www.miquels.cistron.nl/isc-dhcpd/</a>).</p>
</div>
</div>
<div class="section" id="id58">
<h4>7.2.1.3. Changelog<a class="headerlink" href="#id58" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>1.0.2: Added Ubuntu 18.04 compatibility. johnnykeats &lt;<a class="reference external" href="mailto:johnny&#46;keats&#37;&#52;&#48;outlook&#46;com">johnny<span>&#46;</span>keats<span>&#64;</span>outlook<span>&#46;</span>com</a>&gt;</li>
<li>1.0.1: Documentation. johnnykeats &lt;<a class="reference external" href="mailto:johnny&#46;keats&#37;&#52;&#48;outlook&#46;com">johnny<span>&#46;</span>keats<span>&#64;</span>outlook<span>&#46;</span>com</a>&gt;</li>
<li>1.0.0: Role creation. Benoit Leveugle &lt;<a class="reference external" href="mailto:benoit&#46;leveugle&#37;&#52;&#48;gmail&#46;com">benoit<span>&#46;</span>leveugle<span>&#64;</span>gmail<span>&#46;</span>com</a>&gt;</li>
</ul>
</div>
</div>
</div>
<div class="section" id="addons">
<h2>7.3. ADDONS<a class="headerlink" href="#addons" title="Permalink to this headline">¶</a></h2>
<div class="section" id="cloning">
<h3>7.3.1. Cloning<a class="headerlink" href="#cloning" title="Permalink to this headline">¶</a></h3>
<div class="section" id="id59">
<h4>7.3.1.1. Description<a class="headerlink" href="#id59" title="Permalink to this headline">¶</a></h4>
<p>This role provides ipxe files for Clonezilla live usage.</p>
</div>
<div class="section" id="id60">
<h4>7.3.1.2. Instructions<a class="headerlink" href="#id60" title="Permalink to this headline">¶</a></h4>
<p>The Clonezilla Live iso is needed for this role to run properly. The following iso version was used for validating this role: <strong>clonezilla-live-20191024-eoan-amd64.iso</strong></p>
<p>The iso must be mounted in the <em>preboot_execution_environment/clone/clonezilla</em> folder or the content copied inside this directory.</p>
<p>Call bootset using -b clone -i myimage to clone a node into myimage, and -b deploy_clone -i myimage to deploy myimage on the target node.</p>
<p>By default, sda device is targeted, and clone parameters are:</p>
<div class="highlight-text"><div class="highlight"><pre><span></span>ocs-sr -q2 -batch -j2 -z1 -i 2096 -fsck-src-part-y -senc -p reboot savedisk myimage.img sda
</pre></div>
</div>
<p>It is possible to force other clone parameters by setting extra-parameters during bootset invocation. For example, to clone sdb disk, use:</p>
<div class="highlight-text"><div class="highlight"><pre><span></span>bootset -n mynode -i myimage -b clone -e &quot;ocs-sr -q2 -batch -j2 -z1 -i 2096 -fsck-src-part-y -senc -p reboot savedisk myimage.img sdb&quot;
</pre></div>
</div>
<p>Refer to clonezilla live documentation about other parameters.</p>
<p>Same apply to deploy clone. By Default, sda is targeted, and restore clone parameters are:</p>
<div class="highlight-text"><div class="highlight"><pre><span></span>ocs-sr -g auto -e1 auto -e2 -r -j2 -batch -p reboot restoredisk myimage.img sda
</pre></div>
</div>
<p>It is possible to replace these parameters using extra parameters when invoking bootset.</p>
</div>
<div class="section" id="id61">
<h4>7.3.1.3. Changelog<a class="headerlink" href="#id61" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>1.0.0: Role creation. Benoit Leveugle &lt;<a class="reference external" href="mailto:benoit&#46;leveugle&#37;&#52;&#48;gmail&#46;com">benoit<span>&#46;</span>leveugle<span>&#64;</span>gmail<span>&#46;</span>com</a>&gt;</li>
</ul>
</div>
</div>
<div class="section" id="clustershell">
<h3>7.3.2. ClusterShell<a class="headerlink" href="#clustershell" title="Permalink to this headline">¶</a></h3>
<div class="section" id="id62">
<h4>7.3.2.1. Description<a class="headerlink" href="#id62" title="Permalink to this headline">¶</a></h4>
<p>This role provides clustershell and groups for clustershell (based on Ansible groups).</p>
</div>
<div class="section" id="id63">
<h4>7.3.2.2. Instructions<a class="headerlink" href="#id63" title="Permalink to this headline">¶</a></h4>
<p>Check groups using:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>nodeset -LL
</pre></div>
</div>
</div>
<div class="section" id="id64">
<h4>7.3.2.3. To be done<a class="headerlink" href="#id64" title="Permalink to this headline">¶</a></h4>
<p>Tree execution mode is missing.</p>
</div>
<div class="section" id="id65">
<h4>7.3.2.4. Changelog<a class="headerlink" href="#id65" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>1.0.1: Fixed bad template. Documentation. johnnykeats &lt;<a class="reference external" href="mailto:johnny&#46;keats&#37;&#52;&#48;outlook&#46;com">johnny<span>&#46;</span>keats<span>&#64;</span>outlook<span>&#46;</span>com</a>&gt;</li>
<li>1.0.0: Role creation. Benoit Leveugle &lt;<a class="reference external" href="mailto:benoit&#46;leveugle&#37;&#52;&#48;gmail&#46;com">benoit<span>&#46;</span>leveugle<span>&#64;</span>gmail<span>&#46;</span>com</a>&gt;</li>
</ul>
</div>
</div>
<div class="section" id="diskless">
<h3>7.3.3. Diskless<a class="headerlink" href="#diskless" title="Permalink to this headline">¶</a></h3>
<div class="section" id="id66">
<h4>7.3.3.1. Description<a class="headerlink" href="#id66" title="Permalink to this headline">¶</a></h4>
<p>This role provides needed tools to deploy a basic diskless cluster.</p>
</div>
<div class="section" id="id67">
<h4>7.3.3.2. Instructions<a class="headerlink" href="#id67" title="Permalink to this headline">¶</a></h4>
<p>Once the role is deployed, it is possible to use the disklessset tool to interactivley create new diskless images.</p>
<p>Two type of images are available:</p>
<ul class="simple">
<li>Livenet images are full ram images, without persistance but need less infrastructure.</li>
<li>NFS images are full nfs rw images, with psersistance, very simple to use, but need more infrastructure.</li>
</ul>
<p>It is important to understand that this role is independant of the pxe_stack core role, and so each tools do not communicate.</p>
</div>
<div class="section" id="id68">
<h4>7.3.3.3. To be done<a class="headerlink" href="#id68" title="Permalink to this headline">¶</a></h4>
<p>Clean code, add more error detection, and more verbosity.</p>
</div>
<div class="section" id="id69">
<h4>7.3.3.4. Changelog<a class="headerlink" href="#id69" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>1.0.0: Role creation. Benoit Leveugle &lt;<a class="reference external" href="mailto:benoit&#46;leveugle&#37;&#52;&#48;gmail&#46;com">benoit<span>&#46;</span>leveugle<span>&#64;</span>gmail<span>&#46;</span>com</a>&gt;</li>
</ul>
</div>
</div>
<div class="section" id="ofed">
<h3>7.3.4. OFED<a class="headerlink" href="#ofed" title="Permalink to this headline">¶</a></h3>
<div class="section" id="id70">
<h4>7.3.4.1. Description<a class="headerlink" href="#id70" title="Permalink to this headline">¶</a></h4>
<p>This role install and start all needed for OFED based interconnects (Mellanox, etc.).</p>
</div>
<div class="section" id="id71">
<h4>7.3.4.2. Instructions<a class="headerlink" href="#id71" title="Permalink to this headline">¶</a></h4>
<p>Only for Centos/Rhel.</p>
</div>
<div class="section" id="id72">
<h4>7.3.4.3. To be done<a class="headerlink" href="#id72" title="Permalink to this headline">¶</a></h4>
<p>Need to add support for Ubuntu and OpenSuse if exist.</p>
</div>
<div class="section" id="id73">
<h4>7.3.4.4. Changelog<a class="headerlink" href="#id73" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>1.0.0: Role creation. Benoit Leveugle &lt;<a class="reference external" href="mailto:benoit&#46;leveugle&#37;&#52;&#48;gmail&#46;com">benoit<span>&#46;</span>leveugle<span>&#64;</span>gmail<span>&#46;</span>com</a>&gt;</li>
</ul>
</div>
</div>
<div class="section" id="ofed-sm">
<h3>7.3.5. OFED_SM<a class="headerlink" href="#ofed-sm" title="Permalink to this headline">¶</a></h3>
<div class="section" id="id74">
<h4>7.3.5.1. Description<a class="headerlink" href="#id74" title="Permalink to this headline">¶</a></h4>
<p>This role install and start all needed for OFED subnet manager.</p>
</div>
<div class="section" id="id75">
<h4>7.3.5.2. Instructions<a class="headerlink" href="#id75" title="Permalink to this headline">¶</a></h4>
<p>Only for Centos/Rhel.</p>
</div>
<div class="section" id="id76">
<h4>7.3.5.3. To be done<a class="headerlink" href="#id76" title="Permalink to this headline">¶</a></h4>
<p>Need to add support for Ubuntu and OpenSuse if exist.</p>
</div>
<div class="section" id="id77">
<h4>7.3.5.4. Changelog<a class="headerlink" href="#id77" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>1.0.0: Role creation. Benoit Leveugle &lt;<a class="reference external" href="mailto:benoit&#46;leveugle&#37;&#52;&#48;gmail&#46;com">benoit<span>&#46;</span>leveugle<span>&#64;</span>gmail<span>&#46;</span>com</a>&gt;</li>
</ul>
</div>
</div>
<div class="section" id="openldap-client">
<h3>7.3.6. OpenLDAP client<a class="headerlink" href="#openldap-client" title="Permalink to this headline">¶</a></h3>
<div class="section" id="id78">
<h4>7.3.6.1. Description<a class="headerlink" href="#id78" title="Permalink to this headline">¶</a></h4>
<p>This role provides a basic but UNSECURE ldap client based on SSSD.</p>
</div>
<div class="section" id="id79">
<h4>7.3.6.2. Instructions<a class="headerlink" href="#id79" title="Permalink to this headline">¶</a></h4>
<p>NA</p>
</div>
<div class="section" id="id80">
<h4>7.3.6.3. To be done<a class="headerlink" href="#id80" title="Permalink to this headline">¶</a></h4>
<p>Enable encryption to secure this role.</p>
</div>
<div class="section" id="id81">
<h4>7.3.6.4. Changelog<a class="headerlink" href="#id81" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>1.0.1: Fixed bad template. Documentation. johnnykeats &lt;<a class="reference external" href="mailto:johnny&#46;keats&#37;&#52;&#48;outlook&#46;com">johnny<span>&#46;</span>keats<span>&#64;</span>outlook<span>&#46;</span>com</a>&gt;</li>
<li>1.0.0: Role creation. Benoit Leveugle &lt;<a class="reference external" href="mailto:benoit&#46;leveugle&#37;&#52;&#48;gmail&#46;com">benoit<span>&#46;</span>leveugle<span>&#64;</span>gmail<span>&#46;</span>com</a>&gt;</li>
</ul>
</div>
</div>
<div class="section" id="openldap-server">
<h3>7.3.7. OpenLDAP server<a class="headerlink" href="#openldap-server" title="Permalink to this headline">¶</a></h3>
<div class="section" id="id82">
<h4>7.3.7.1. Description<a class="headerlink" href="#id82" title="Permalink to this headline">¶</a></h4>
<p>This role provides a basic but UNSECURE ldap server. It also provides phpldapadmin configuration to manage LDAP.</p>
</div>
<div class="section" id="id83">
<h4>7.3.7.2. Instructions<a class="headerlink" href="#id83" title="Permalink to this headline">¶</a></h4>
<p>Login into <a class="reference external" href="http://localhost/phpldapadmin">http://localhost/phpldapadmin</a> to manage LDAP.</p>
<p>Keep in mind this role is for the time being unsecure.</p>
</div>
<div class="section" id="id84">
<h4>7.3.7.3. To be done<a class="headerlink" href="#id84" title="Permalink to this headline">¶</a></h4>
<p>Enable encryption to secure this role.</p>
</div>
<div class="section" id="id85">
<h4>7.3.7.4. Changelog<a class="headerlink" href="#id85" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>1.0.1: Fixed bad template. Documentation. johnnykeats &lt;<a class="reference external" href="mailto:johnny&#46;keats&#37;&#52;&#48;outlook&#46;com">johnny<span>&#46;</span>keats<span>&#64;</span>outlook<span>&#46;</span>com</a>&gt;</li>
<li>1.0.0: Role creation. Benoit Leveugle &lt;<a class="reference external" href="mailto:benoit&#46;leveugle&#37;&#52;&#48;gmail&#46;com">benoit<span>&#46;</span>leveugle<span>&#64;</span>gmail<span>&#46;</span>com</a>&gt;</li>
</ul>
</div>
</div>
<div class="section" id="nic-with-nmcli">
<h3>7.3.8. NIC with nmcli<a class="headerlink" href="#nic-with-nmcli" title="Permalink to this headline">¶</a></h3>
<div class="section" id="id86">
<h4>7.3.8.1. Description<a class="headerlink" href="#id86" title="Permalink to this headline">¶</a></h4>
<p>This role configure network interfaces to provide desired ip, prefix, gateway, etc.</p>
<p>This role is still under work, as nmcli is not supported in RHEL 8 for now, and that this role need to handle much more features.</p>
</div>
<div class="section" id="id87">
<h4>7.3.8.2. Instructions<a class="headerlink" href="#id87" title="Permalink to this headline">¶</a></h4>
<p>NA</p>
</div>
<div class="section" id="id88">
<h4>7.3.8.3. To be done<a class="headerlink" href="#id88" title="Permalink to this headline">¶</a></h4>
<p>Add more features, as nmcli Ansible module can do much more.</p>
<ul class="simple">
<li>VLANs</li>
<li>LACP/Bond</li>
<li>Non network linked NIC</li>
<li>Multi IP</li>
</ul>
</div>
<div class="section" id="id89">
<h4>7.3.8.4. Changelog<a class="headerlink" href="#id89" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>1.0.2: Adding Ubuntu 18.04 compatibility. johnnykeats &lt;<a class="reference external" href="mailto:johnny&#46;keats&#37;&#52;&#48;outlook&#46;com">johnny<span>&#46;</span>keats<span>&#64;</span>outlook<span>&#46;</span>com</a>&gt;</li>
<li>1.0.1: Documentation. johnnykeats &lt;<a class="reference external" href="mailto:johnny&#46;keats&#37;&#52;&#48;outlook&#46;com">johnny<span>&#46;</span>keats<span>&#64;</span>outlook<span>&#46;</span>com</a>&gt;</li>
<li>1.0.0: Role creation. Benoit Leveugle &lt;<a class="reference external" href="mailto:benoit&#46;leveugle&#37;&#52;&#48;gmail&#46;com">benoit<span>&#46;</span>leveugle<span>&#64;</span>gmail<span>&#46;</span>com</a>&gt;</li>
</ul>
</div>
</div>
<div class="section" id="prometheus-server">
<h3>7.3.9. Prometheus server<a class="headerlink" href="#prometheus-server" title="Permalink to this headline">¶</a></h3>
<div class="section" id="id90">
<h4>7.3.9.1. Description<a class="headerlink" href="#id90" title="Permalink to this headline">¶</a></h4>
<p>This role deploy prometheus server with alertmanager.</p>
</div>
<div class="section" id="id91">
<h4>7.3.9.2. Instructions<a class="headerlink" href="#id91" title="Permalink to this headline">¶</a></h4>
<p>Prometheus is available at <a class="reference external" href="http://localhost:9090">http://localhost:9090</a></p>
<p>Alertmanager is available at <a class="reference external" href="http://localhost:9093">http://localhost:9093</a></p>
<p>Node_exporter is available at <a class="reference external" href="http://localhost:9100">http://localhost:9100</a></p>
</div>
<div class="section" id="id92">
<h4>7.3.9.3. To be done<a class="headerlink" href="#id92" title="Permalink to this headline">¶</a></h4>
<p>Allow groups alerts selection.</p>
</div>
<div class="section" id="id93">
<h4>7.3.9.4. Changelog<a class="headerlink" href="#id93" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>1.0.1: Documentation. johnnykeats &lt;<a class="reference external" href="mailto:johnny&#46;keats&#37;&#52;&#48;outlook&#46;com">johnny<span>&#46;</span>keats<span>&#64;</span>outlook<span>&#46;</span>com</a>&gt;</li>
<li>1.0.0: Role creation. Benoit Leveugle &lt;<a class="reference external" href="mailto:benoit&#46;leveugle&#37;&#52;&#48;gmail&#46;com">benoit<span>&#46;</span>leveugle<span>&#64;</span>gmail<span>&#46;</span>com</a>&gt;</li>
</ul>
</div>
</div>
<div class="section" id="prometheus-client">
<h3>7.3.10. Prometheus client<a class="headerlink" href="#prometheus-client" title="Permalink to this headline">¶</a></h3>
<div class="section" id="id94">
<h4>7.3.10.1. Description<a class="headerlink" href="#id94" title="Permalink to this headline">¶</a></h4>
<p>This role deploy node_exporter for Prometheus queries.</p>
</div>
<div class="section" id="id95">
<h4>7.3.10.2. Instructions<a class="headerlink" href="#id95" title="Permalink to this headline">¶</a></h4>
<p>Node_exporter is available at <a class="reference external" href="http://localhost:9100">http://localhost:9100</a></p>
</div>
<div class="section" id="id96">
<h4>7.3.10.3. To be done<a class="headerlink" href="#id96" title="Permalink to this headline">¶</a></h4>
<p>Allow groups alerts selection.</p>
</div>
<div class="section" id="id97">
<h4>7.3.10.4. Changelog<a class="headerlink" href="#id97" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>1.0.0: Documentation. johnnykeats &lt;<a class="reference external" href="mailto:johnny&#46;keats&#37;&#52;&#48;outlook&#46;com">johnny<span>&#46;</span>keats<span>&#64;</span>outlook<span>&#46;</span>com</a>&gt;</li>
<li>1.0.0: Role creation. johnnykeats &lt;<a class="reference external" href="mailto:johnny&#46;keats&#37;&#52;&#48;outlook&#46;com">johnny<span>&#46;</span>keats<span>&#64;</span>outlook<span>&#46;</span>com</a>&gt;</li>
</ul>
</div>
</div>
<div class="section" id="report">
<h3>7.3.11. Report<a class="headerlink" href="#report" title="Permalink to this headline">¶</a></h3>
<div class="section" id="id98">
<h4>7.3.11.1. Description<a class="headerlink" href="#id98" title="Permalink to this headline">¶</a></h4>
<p>This role try to provide sys admin few useful tools.</p>
<ul class="simple">
<li>An automatic known issue paterns checker for the stack</li>
<li>Many visual reports (inventory, playbooks, network, facts)</li>
</ul>
</div>
<div class="section" id="id99">
<h4>7.3.11.2. Instructions<a class="headerlink" href="#id99" title="Permalink to this headline">¶</a></h4>
<p>Report is available at <a class="reference external" href="http://localhost/report/index.html">http://localhost/report/index.html</a></p>
</div>
<div class="section" id="id100">
<h4>7.3.11.3. To be done<a class="headerlink" href="#id100" title="Permalink to this headline">¶</a></h4>
<p>Many things…</p>
</div>
<div class="section" id="id101">
<h4>7.3.11.4. Changelog<a class="headerlink" href="#id101" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>1.0.1: Documentation. johnnykeats &lt;<a class="reference external" href="mailto:johnny&#46;keats&#37;&#52;&#48;outlook&#46;com">johnny<span>&#46;</span>keats<span>&#64;</span>outlook<span>&#46;</span>com</a>&gt;</li>
<li>1.0.0: Role creation. Benoit Leveugle &lt;<a class="reference external" href="mailto:benoit&#46;leveugle&#37;&#52;&#48;gmail&#46;com">benoit<span>&#46;</span>leveugle<span>&#64;</span>gmail<span>&#46;</span>com</a>&gt;</li>
</ul>
</div>
</div>
<div class="section" id="slurm">
<h3>7.3.12. Slurm<a class="headerlink" href="#slurm" title="Permalink to this headline">¶</a></h3>
<div class="section" id="id102">
<h4>7.3.12.1. Description<a class="headerlink" href="#id102" title="Permalink to this headline">¶</a></h4>
<p>This role provides slurm configuration for server, client and login nodes.</p>
</div>
<div class="section" id="id103">
<h4>7.3.12.2. Instructions<a class="headerlink" href="#id103" title="Permalink to this headline">¶</a></h4>
<p>To use this role for all 3 types of nodes, simply add a vars in the playbook when loading the role. Extra vers is <strong>slurm_profile</strong>.</p>
<p>For a controler (server), use:</p>
<div class="highlight-yaml"><div class="highlight"><pre><span></span><span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">role</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">HPC_slurm</span>
  <span class="l l-Scalar l-Scalar-Plain">tags</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">HPC_slurm</span>
  <span class="l l-Scalar l-Scalar-Plain">vars</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">slurm_profile</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">controler</span>
</pre></div>
</div>
<p>For a compute node (client), use:</p>
<div class="highlight-yaml"><div class="highlight"><pre><span></span><span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">role</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">HPC_slurm</span>
  <span class="l l-Scalar l-Scalar-Plain">tags</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">HPC_slurm</span>
  <span class="l l-Scalar l-Scalar-Plain">vars</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">slurm_profile</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">node</span>
</pre></div>
</div>
<p>And for a login (passive client), use:</p>
<div class="highlight-yaml"><div class="highlight"><pre><span></span><span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">role</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">HPC_slurm</span>
  <span class="l l-Scalar l-Scalar-Plain">tags</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">HPC_slurm</span>
  <span class="l l-Scalar l-Scalar-Plain">vars</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">slurm_profile</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">passive</span>
</pre></div>
</div>
</div>
<div class="section" id="id104">
<h4>7.3.12.3. To be done<a class="headerlink" href="#id104" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>slurmdbd + mariadb</li>
<li>static file</li>
</ul>
</div>
<div class="section" id="id105">
<h4>7.3.12.4. Changelog<a class="headerlink" href="#id105" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>1.0.1: Documentation. Benoit Leveugle &lt;<a class="reference external" href="mailto:benoit&#46;leveugle&#37;&#52;&#48;gmail&#46;com">benoit<span>&#46;</span>leveugle<span>&#64;</span>gmail<span>&#46;</span>com</a>&gt;</li>
<li>1.0.0: Role creation. Benoit Leveugle &lt;<a class="reference external" href="mailto:benoit&#46;leveugle&#37;&#52;&#48;gmail&#46;com">benoit<span>&#46;</span>leveugle<span>&#64;</span>gmail<span>&#46;</span>com</a>&gt;</li>
</ul>
</div>
</div>
<div class="section" id="users-basic">
<h3>7.3.13. Users basic<a class="headerlink" href="#users-basic" title="Permalink to this headline">¶</a></h3>
<div class="section" id="id106">
<h4>7.3.13.1. Description<a class="headerlink" href="#id106" title="Permalink to this headline">¶</a></h4>
<p>This role provides a very basic users management, for simple clusters.</p>
</div>
<div class="section" id="id107">
<h4>7.3.13.2. Instructions<a class="headerlink" href="#id107" title="Permalink to this headline">¶</a></h4>
<p>Copy addon/users_basic.yml into /etc/bluebanquise/inventory/group_vars/all/addons folder.</p>
<p>Then edit this file according to your needs, and play this role on all hosts with users.</p>
<p>To generate an sha512 password, use the following command (python &gt;3.3):</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>python -c <span class="s1">&#39;import crypt,getpass; print(crypt.crypt(getpass.getpass(), crypt.mksalt(crypt.METHOD_SHA512)))&#39;</span>
</pre></div>
</div>
<p>Or (python 2):</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>python -c <span class="s2">&quot;import crypt,random,string; print crypt.crypt(raw_input(&#39;clear-text password: &#39;), &#39;\$6\$&#39; + &#39;&#39;.join([random.choice(string.ascii_letters + string.digits) for _ in range(16)]))&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="id108">
<h4>7.3.13.3. Changelog<a class="headerlink" href="#id108" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>1.0.1: Documentation and ressources. johnnykeats &lt;<a class="reference external" href="mailto:johnny&#46;keats&#37;&#52;&#48;outlook&#46;com">johnny<span>&#46;</span>keats<span>&#64;</span>outlook<span>&#46;</span>com</a>&gt;</li>
<li>1.0.0: Role creation. Benoit Leveugle &lt;<a class="reference external" href="mailto:benoit&#46;leveugle&#37;&#52;&#48;gmail&#46;com">benoit<span>&#46;</span>leveugle<span>&#64;</span>gmail<span>&#46;</span>com</a>&gt;</li>
</ul>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="references.html" class="btn btn-neutral float-right" title="8. References" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="deploy_bluebanquise.html" class="btn btn-neutral float-left" title="6. Deploy BlueBanquise" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Benoît Leveugle, Johnny Keats

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>